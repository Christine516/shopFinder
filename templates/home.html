<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script type="text/javascript" src="/static/js/trial.js" ></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title> Home Page</title>
    <link rel="stylesheet" href="/static/css/home.css">
  </head>
  <body>
    <section id=header>
      <h1>SHOP FINDER</h1>
      <h2>A Community of Shoppers Finding One Item at a Time</h2>
    </section>
    <section id = "outerWrap">
        <div id = "navBar">
          <a class = "navBar_options" href = "/">Home</a>
          <a class = "navBar_options" href = "/allPosts">Explore</a>
          <div>
            <a class = "navBar_options" href = "/Logout">Log Out</a>
          </div>
        </div>
    </section>
    <h1>Search by Tag</h1>
    <form method="post" action = "/search-results">
      <input type="text" name="search" placeholder="Search...">
      <button type="submit">Search!</button>
    </form>
    <h1>New Post</h1>
    <form method="post" action = "{0}" enctype="multipart/form-data">
      <label>
        Upload Image
        <input type="file" name="image" accept="image/gif, image/jpeg, image/png">
      </label><br/>
      <label>
        Tags:
        <input type="text" name="tag1" value="">
        <input type="text" name="tag2" value="">
        <input type="text" name="tag3" value="">
      </label><br/>
      <button type="submit">Post!</button>
    </form>
    <h1>Past Posts</h1>
    {% if all_posts !=  None %}

      {% for post in all_posts %}
        <div>
          <img src = {{ post.image_url }}>
          {%  for tag in post.tags %}
            <p>Tags: {{ tag }}</p>
          {% endfor %}
          <p>User: {{ post.user_name}} </p>
          <input id = "Input{{ post.key.id }}"type="text" name="Comment" value="Post Comment here">
          <button  onclick = "CommentPost({{ post.key.id }})" type="submit">Post!</button>

          {% if post.comments != None %}
            {% for comment in post.comments %}
              <div>
              <p>User:{{ comment.user_name }}</p>
               <p>Likes:{{ comment.likes }} </p>
               <p>{{ comment.content }} </p>
               <!-- {% if comment != None %}
                 {% for subcomment in comment.comments %}
                   <div>
     `              <p>User:{{ subcomment.user_name }}</p>
                    <p>Likes:{{ subcomment.likes }} </p>
                    <p>{{ subcomment.content }} </p>
                   </div>
                 {% endfor %}
            {% endif %} -->
              </div>
            {% endfor %}
          {% endif %}
          <button id  = {{ post.key.id  }} onclick="LikePost({{ post.key.id }})" >Likes: {{ post.likes }} </button>
      </div>
      {% endfor %}
    {% else %}
      <h1> No Posts made yet </h1>
    {% endif %}
    </body>
</html>
